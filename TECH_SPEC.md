# TECH_SPEC

## Цель
Сделать демонстрационное web‑приложение на Yii1 для каталога книг с авторами, подписками и отчетом, как в тестовом задании.

## Технологии
- Yii1 (web‑приложение, не API).
- PHP 8+.
- MySQL 5.5.x / MariaDB.

## Роли и доступ
- Гость: просмотр списка/карточки книг и авторов, подписка на автора (по телефону).
- Пользователь: просмотр + CRUD книг и авторов.

## Сущности и связи
- `authors`: ФИО.
- `books`: название, год, описание, ISBN, обложка (путь к файлу).
- `book_author`: связь многие‑ко‑многим.
- `subscriptions`: телефон гостя + автор.
- `users`: учетные записи для доступа к CRUD.

## Функциональность
- CRUD для книг и авторов (пользователь).
- Просмотр каталогов/деталей (всем).
- Подписка гостя на автора (без регистрации).
- Отчет: ТОП‑10 авторов по количеству книг за выбранный год (всем).
- SMS‑уведомления при добавлении книги (для авторов из подписки).

## SMS
- Интеграция с SmsPilot через HTTP API.
- Ключ берется из `protected/config/params.php` (эмуляторный ключ).
- Ошибки отправки не блокируют сохранение книги, логируются.

## БД и миграции
- Миграции Yii1 (CDbMigration).
- Без дампов БД, без `runtime/` и `vendor/`.
- Таблицы с индексами и внешними ключами (учитывая MySQL 5.5).

## Файлы и структура
- Структура Yii1: `protected/` (controllers, models, views, components, migrations, config).
- В корне репозитория только документация (`WISHLIST.md`, `TECH_SPEC.md`, задание).
- Текстовые файлы UTF‑8 без BOM, переводы строк LF.
